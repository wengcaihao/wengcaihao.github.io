<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="水中岚的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="水中岚">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="水中岚">
<meta property="og:description" content="水中岚的博客">
<meta property="og:locale">
<meta property="article:author" content="水中岚">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-Hans","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>水中岚</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">水中岚</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">尽人事 听天命</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="水中岚"
      src="/uploads/me.jpg">
  <p class="site-author-name" itemprop="name">水中岚</p>
  <div class="site-description" itemprop="description">水中岚的博客</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives">
          <span class="site-state-item-count">18</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/05/04/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-04-%E7%AC%AC%E4%B8%83%E7%AB%A0-%E5%A4%A7%E8%A7%84%E6%A8%A1%E5%A4%9A%E5%A4%A9%E7%BA%BF%E4%BC%A0%E8%BE%93-%E4%B8%80-%E5%A4%9A%E5%A4%A9%E7%BA%BF%E4%BC%A0%E8%BE%93%E6%96%B9%E6%A1%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/me.jpg">
      <meta itemprop="name" content="水中岚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水中岚">
      <meta itemprop="description" content="水中岚的博客">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 水中岚">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/04/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-04-%E7%AC%AC%E4%B8%83%E7%AB%A0-%E5%A4%A7%E8%A7%84%E6%A8%A1%E5%A4%9A%E5%A4%A9%E7%BA%BF%E4%BC%A0%E8%BE%93-%E4%B8%80-%E5%A4%9A%E5%A4%A9%E7%BA%BF%E4%BC%A0%E8%BE%93%E6%96%B9%E6%A1%88/" class="post-title-link" itemprop="url">第七章-大规模多天线传输(一)-多天线传输方案</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-05-04 20:09:40" itemprop="dateCreated datePublished" datetime="2022-05-04T20:09:40+08:00">2022-05-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-05 09:54:58" itemprop="dateModified" datetime="2022-05-05T09:54:58+08:00">2022-05-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="多天线传输方案"><a href="#多天线传输方案" class="headerlink" title="多天线传输方案"></a>多天线传输方案</h1><h2 id="下行传输方案"><a href="#下行传输方案" class="headerlink" title="下行传输方案"></a>下行传输方案</h2><p>NR PDSCH传输的处理过程如图所示：</p>
<img src="/2022/05/04/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-04-%E7%AC%AC%E4%B8%83%E7%AB%A0-%E5%A4%A7%E8%A7%84%E6%A8%A1%E5%A4%9A%E5%A4%A9%E7%BA%BF%E4%BC%A0%E8%BE%93-%E4%B8%80-%E5%A4%9A%E5%A4%A9%E7%BA%BF%E4%BC%A0%E8%BE%93%E6%96%B9%E6%A1%88/%E5%9B%BE1.png" class>

<p>高层下发的传输块经信道编码后与码字一一对应；码字中的比特流经过加扰和调制之后，通过层映射模块映射到并行的数据流（或称<strong>层</strong>）；每一层的数据流经过端口映射模块映射到传输使用的天线端口（端口1000-1011）上去。每个天线端口上根据资源分配进行资源的映射以及OFDM调制。其中还有一个非标准化的处理模块（预编码模块），目的是实现天线端口到物理天线的映射过程，也就是实现预编码或者波束赋形的过程。</p>
<p><strong>补充一下LTE中的知识：</strong><a target="_blank" rel="noopener" href="https://www.txrjy.com/thread-549490-1-1.html">请教下有关码字和层映射的问题 - 技术综合版块 - 通信人家园 - Powered by C114 (txrjy.com)</a><br><strong>LTE的下行发送过程：</strong></p>
<ol>
<li>对于来自上层的数据，进行信道编码，形成码字；</li>
<li>对不同的码字进行调制，产生调制符号；</li>
<li>对于不同码字的调制信号组合一起进行层映射；</li>
<li>对于层映射之后的数据进行预编码，映射到天线端口上发送。</li>
</ol>
<p><strong>码字、层和天线端口的区分</strong></p>
<ul>
<li><p>码字：</p>
<p>码字是指来自上层的业务流进行信道编码之后的数据。不同的码字q区分不同的数据流，其目的是通过MIMO发送多路数据，实现空间复用。</p>
<p>由于LTE系统接收端最多支持2天线，所以发送的数据流数量最多为2。这决定了不管发送端天线数为1、2或者4，码字q的数量最多只为2。</p>
<p>当发送端天线只有一根时，实际能够支持的码流数量也只能为1，所以码字数量最多也只能为1。</p>
<p>如果接收端有两根接收天线，但是两根天线高度相关。如果发送端仍然发送两组数据流（两个码字），则接收端无法解码。因此，在收端信道高度相关的情况下，码字数量也只能为1。</p>
<p>综上，码字q的数量决定于信道矩阵的秩。</p>
</li>
<li><p>层</p>
<p>由于码字数量和发送天线数量不一致，需要将码字流映射到不同的发送天线上，因此需要使用层与预编码。</p>
<p>层映射与预编码实际上是“映射码字到发送天线”过程的两个的子过程。</p>
<p>层映射首先按照一定的规则将码字流重新映射到多个层（新的数据流），（注：层的数量小于物理信道传输所使用的天线端口数量）。</p>
<p>预编码再将数据映射到不同的天线端口上。</p>
<p>在各个天线端口上进行资源映射，生成OFDM符号并发射。</p>
</li>
<li><p>天线端口</p>
<p>天线端口指用于传输的<strong>逻辑</strong>端口，与物理天线不存在定义上的一一对应关系。天线端口由用于该天线的参考信号来定义。</p>
<p>从层到物理天线端口传输是通过预编码来完成的。无论层数是多少，只要其小于用于物理传输的端口数，即可通过预编码矩阵W(i)将其映射到物理的传输天线上。</p>
</li>
</ul>
<p><strong>总结</strong></p>
<p>码字用于区分空间复用的流；层用于重排码字数据；天线端口决定预编码天线映射。  </p>
<h3 id="码字映射"><a href="#码字映射" class="headerlink" title="码字映射"></a>码字映射</h3><h4 id="码字数量"><a href="#码字数量" class="headerlink" title="码字数量"></a>码字数量</h4><p>NR系统中SU-MIMO可以支持最多8层的数据传输。NR的数据层数为1-4时采用单码字传输，5-8层时采用双码字传输。</p>
<h4 id="码字到层的映射"><a href="#码字到层的映射" class="headerlink" title="码字到层的映射"></a>码字到层的映射</h4><ul>
<li>对等映射：两个码字对应的层数尽可能相等。层数为偶数时，两个码字的层数相同；层数为奇数时，码字“0”的层数比码字“1”少一个。</li>
<li>非对等映射：完全根据各层的信道条件灵活调整码字与层的对应关系。</li>
</ul>
<p>NR采用了对等映射。</p>
<p><strong>码字到空&#x2F;时&#x2F;频资源的映射</strong></p>
<p>针对基于CP-OFDM的传输方式，考虑过以下几种映射</p>
<ul>
<li>方式1（层-频率-时间）：每个码字首先串&#x2F;并转换为层，然后对于每一层，调制符号按照先频域（子载波）后时域（符号）的方式进行映射。UE在接收到某个码块组的一个或数个OFDM符号后就进行解码，拥有较低的解码时延。NR R15选择了这种方式。</li>
<li>方式2（层组1-频率-时间，层组2-频率-时间）将多个数据层分为两组，分别在组内按照层-频率-时间的顺序进行映射。</li>
<li>方式3（层-时间-频率）每层的调制符号先依次映射到对应于某一子载波的各OFDM符号上，然后再在下一子载波重复上述操作。优势在于可以在时变信道中获得更高的时间分级增益，缺点是解码时延大。</li>
</ul>
<p>基于DFT-s-OFDM的上行传输只能支持单流，沿用了层-频率-时间的映射方式。</p>
<h3 id="PRB绑定"><a href="#PRB绑定" class="headerlink" title="PRB绑定"></a>PRB绑定</h3><p>NR 的DM-RS与数据采用相同的预编码，这种情况下，频率选择性预编码的性能与信道估计精度之间存在一定的矛盾。为了获得多个PRB联合信道估计的处理增益，就会限制频率选择性预编码的颗粒度，从而降低预编码增益；反之，如果为了获得频率选择性预编码的增益而对每个PRB独立编码，则无法进行联合信道估计。NR使用预编码资源组（PRG）来控制频率选择性编码的颗粒度。PRG定义为一组连续的PRB（物理资源块），在这组PRB上，UE可以假设基站用相同的预编码矩阵传输。</p>
<p>NR将PRB的大小确定为2、4或者“连续的被调度带宽”三种取值。</p>
<h3 id="高可靠性传输方案"><a href="#高可靠性传输方案" class="headerlink" title="高可靠性传输方案"></a>高可靠性传输方案</h3><p>针对高速移动场景以及高频段常见的遮挡效应，特殊设计的多天线传输方案可以提高传输的<strong>可靠性</strong>。如：</p>
<ul>
<li>基于多TRP（传输&#x2F;接收点）&#x2F;阵面的发射分集方案：通过多个TRP&#x2F;阵面分别发送具有一定冗余度的多个数据样本，传输被阻断的可能性被降低。</li>
<li>半开环传输方案：将粗略的波束反馈信息（闭环）与开环的预编码轮循相结合。如：根据UE的上报信息，使用较宽的波束或者小范围扫描的一组波束向UE所处的大致方向进行赋性可以提高可靠性。</li>
</ul>
<h3 id="多传输点协作"><a href="#多传输点协作" class="headerlink" title="多传输点协作"></a>多传输点协作</h3><p>1.多点协作可以改善小区边缘的覆盖，在服务区内提供更为均衡的服务质量，在NR中仍是一种重要的技术手段。随着频段的升高，为了保证网络覆盖，需要相对密集的接入点部署。而随着有源天线设备集成度的提高，高频段将更加倾向于采用模块化的有源天线阵列。每个TRP的天线阵列可以被分为若干个相对独立的天线阵面，整个阵面的形态和端口数可以随着部署场景和业务需求进行灵活的调制。</p>
<p>2.根据发送信号流到多个TRP&#x2F;阵面的映射关系，多点协作传输技术可以分为相干和非相干两种。</p>
<ul>
<li>相关传输：每个数据层会经过加权向量映射到多个TRP&#x2F;阵面上</li>
<li>非相干传输：每个数据层只映射到部分TRP&#x2F;阵面上，不同数据层映射到不同TRP&#x2F;阵面上。</li>
</ul>
<p>多点协作重点考虑非相干传输。</p>
<p>3.非相干-联合传输（NC-JT）可以采用PDCCH调度单个PDSCH的方式（方式1），也可以采用多个PDCCH各自调度对应的PDSCH的方式（方式2）</p>
<p>方式1传输点之间的协作更紧密，需要更为理想的回传链路交互CSI和控制信息。</p>
<p>方式2多个PDSCH的传输相对独立，对回传链路的时延等非理想因素不敏感。</p>
<h2 id="上行传输方案"><a href="#上行传输方案" class="headerlink" title="上行传输方案"></a>上行传输方案</h2><p>1.NR系统的上行链路支持DFT-s-OFDM调制于CP-OFDM调制。使用DFT-s-OFDM时，每个UE只能进行单流传输；使用CP-OFDM时，每个UE可以使用4个数据流，从而支持更高的峰值速率。</p>
<p>2.NR上行传输支持基于码本和非码本传输</p>
<ul>
<li>基于码本：UE使用固定的预编码矩阵来源于固定的码本，是基站根据测量的上行信道选择的。</li>
<li>非码本：若上下行存在互易性则可使用非码本传输，UE可以基于对下行信道的测量向基站推荐上行链路中可以使用的预编码矩阵，然后由基站确定上行调度时使用的预编码矩阵。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%B8%89-%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D%E5%92%8C%E8%B0%83%E5%BA%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/me.jpg">
      <meta itemprop="name" content="水中岚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水中岚">
      <meta itemprop="description" content="水中岚的博客">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 水中岚">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%B8%89-%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D%E5%92%8C%E8%B0%83%E5%BA%A6/" class="post-title-link" itemprop="url">第6章-控制信道设计与资源调度(三)-资源分配和调度</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-05-03 17:17:00" itemprop="dateCreated datePublished" datetime="2022-05-03T17:17:00+08:00">2022-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-04 20:33:21" itemprop="dateModified" datetime="2022-05-04T20:33:21+08:00">2022-05-04</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="资源分配和调度"><a href="#资源分配和调度" class="headerlink" title="资源分配和调度"></a>资源分配和调度</h1><h2 id="传输块大小设计"><a href="#传输块大小设计" class="headerlink" title="传输块大小设计"></a>传输块大小设计</h2><p>NR中传输块大小（TBS）的确定方法是UE根据资源分配信息计算中间信息比特数$N_{info}$，再对$N_{info}$进行量化确定最终的传输块大小。<br>$$<br>N_{info}&#x3D;N_{RE}·R·Q_m·v<br>$$<br>其中，$R$、$Q_m$为根据不同调制与编码策略（MCS）确定的码率和调制阶数。$v$为层数。$N_{RE}$为数据信道在一个时隙内的可用RE数目，$N_{RE}&#x3D;min(156,N’<em>{RE})·n</em>{PRB}$，其中，$N’<em>{RE}$为一个PRB内可用的RE数目，$n</em>{PRB}$为PRB的个数。其中$N’<em>{RE}&#x3D;N^{RB}</em>{sc}·N^{sh}<em>{sysmb}-N^{PRB}</em>{DMRS}-N^{PRB}<em>{oh}$,其中，$N^{RB}</em>{sc}$为一个PRB的子载波个数，固定为12；$N^{sh}<em>{sysmb}$为数据信道在一个时隙内占用的符号数;$N^{PRB}</em>{DMRS}$为一个DM-RS所占用的RE个数，根据调度信息确定。$N^{PRB}_{oh}$为高层半静态配置的开销，默认值为0.</p>
<p>对于承载寻呼消息和随机接入响应的下行传输块，</p>
<p>$N_{info}&#x3D;S·N_{RE}·R·Q_m·v$，$S$为小于等于1的系数，用于进一步降低码率从而提高覆盖。</p>
<p>最终的TBS根据$N_{info}$量化获得。</p>
<h2 id="资源分配"><a href="#资源分配" class="headerlink" title="资源分配"></a>资源分配</h2><p>1.时域方面，NR支持灵活的时域资源分配。数据信道的时域资源分配可以是以OFDM符号为单位的若干个符号，也可以是以时隙为单位的若干个时隙。</p>
<p>频域方面，NR以PRB为粒度进行资源分配。</p>
<p>2.NR上下行分别支持两种数据分配类型，分别为资源分配类型（RA Type）0和资源分配类型（RA Type）1。</p>
<img src="/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%B8%89-%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D%E5%92%8C%E8%B0%83%E5%BA%A6/%E5%9B%BE1.png" class>

<h2 id="调度设计"><a href="#调度设计" class="headerlink" title="调度设计"></a>调度设计</h2><p>NR考虑灵活的上下行配置以及不同的业务需求，支持灵活的HARQ时序关系，支持数据信道的起始时隙以及OFDM符号资源的灵活分配。</p>
<p>对于动态调度的PDSCH，DCI指示PDSCH相对PDCCH所在时隙的时隙偏移$K_0$以及PDSCH的OFDM符号资源分配，从而实现PDSCH调度时许和时域资源的灵活控制。</p>
<p>DCI还指示承载HARQ-ACK反馈的PUCCH相对于PDSCH结束时隙的时隙偏移$K_1$，用于根据不同的处理时延需求和TDD上下行配比，确定合适的HARQ-ACK反馈时隙。</p>
<p>DCI还指示PUSCH相对PDCCH所在时隙的时隙偏移$K_2$以及PUSCH的OFDM符号资源分配。</p>
<h2 id="免调度传输"><a href="#免调度传输" class="headerlink" title="免调度传输"></a>免调度传输</h2><p>PUSCH传输是基于UE的调度请求和基站的上行调度许可进行的，称为基于动态调度的PUSCH，流程如下：</p>
<img src="/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%B8%89-%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D%E5%92%8C%E8%B0%83%E5%BA%A6/%E5%9B%BE2.png" class>

<p>这种基于UE的调度请求和上行调度许可的传输存在的主要问题是，请求和调度过程会导致数据传输需要经过一个较长的延迟，难以满足低时延业务的要求。</p>
<p>NR引入上行免调度传输方法，即上行数据传输之前，UE不需要向基站发送调度请求，也不需要等待基站的上行调度许可，而是由UE在事先配置或激活的资源上自主进行上行数据的发送，流程如下</p>
<img src="/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%B8%89-%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D%E5%92%8C%E8%B0%83%E5%BA%A6/%E5%9B%BE3.png" class>

<p>上行免调度传输方案分为Type1和Type2两种。Type1的上行免调度的传输配置是通过RRC信令完成的，Type2的上行免调度的传输配置是通过RRC信令和DCI激活信令共同完成的。实际应用中，对共享配置资源的用户较多、业务数据的到达比较分散的场景采用Type1；而对业务数据的到达比较集中、到达时间可预测的场景采用Type2方案。</p>
<h1 id="速率匹配"><a href="#速率匹配" class="headerlink" title="速率匹配"></a>速率匹配</h1><p>速率匹配是指在进行PDSCH资源映射时确定哪些资源可以映射的过程，不可以映射PDSCH的资源称为速率匹配资源。NR支持两种类型的速率匹配方案：RB-符号级速率匹配和RE速率级匹配。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%BA%8C-%E4%B8%8A%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/me.jpg">
      <meta itemprop="name" content="水中岚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水中岚">
      <meta itemprop="description" content="水中岚的博客">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 水中岚">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%BA%8C-%E4%B8%8A%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/" class="post-title-link" itemprop="url">第6章-控制信道设计与资源调度(二)-上行控制信道</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-05-03 10:41:21" itemprop="dateCreated datePublished" datetime="2022-05-03T10:41:21+08:00">2022-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-04 20:19:38" itemprop="dateModified" datetime="2022-05-04T20:19:38+08:00">2022-05-04</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="上行控制信道"><a href="#上行控制信道" class="headerlink" title="上行控制信道"></a>上行控制信道</h1><p>1.PUCCH用于承载混合自动重传请求确认、调度请求和信道状态信息等上行控制信息。</p>
<h3 id="PUCCH传输方案"><a href="#PUCCH传输方案" class="headerlink" title="PUCCH传输方案"></a>PUCCH传输方案</h3><p>1.NR定义了5种PUCCH格式</p>
<ul>
<li>根据承载得比特数不同可以分为两类：一类是用于承载1~2bit 上行控制信息得PUCCH格式，如PUCCH格式0和格式1；另一类用于承载大于2bit 上行控制信息的PDCCH格式，如PUCCH2、3、4。</li>
<li>根据是否支持多用户复用也可以分为两类：一类为不具有多用户复用容量的PUCCH格式，如PUCCH格式2和格式3；另一类为具有多用户复用容量的PUCCH格式，如PUCCH格式0、1、4.</li>
<li>根据上行覆盖和传输时延的不同也可以分为两类PUCCH格式：一类为占用1-2个OFDM符号传输的短PUCCH格式，如PUCCH格式0和2；另一类为占用4-14个OFDM符号传输的长PUCCH格式，如PUCCH格式1、3、4。</li>
<li>其中，短PUCCH的主要目的是支持低时延需求的UCI反馈。长PUCCH需要不同的上行覆盖要求。</li>
</ul>
<img src="/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%BA%8C-%E4%B8%8A%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/%E5%9B%BE1.png" class>

<p>2.与LTE不同，NR中的PUCCH是否进行时隙内调频是可配置的，而非总使用跳频。这是因为：</p>
<p>每种PUCCH格式都可以支持时隙内调频以获得频域分级增益，但是这会引入过渡时间。PUCCH占用的OFDM个数越少、OFDM符号长度越短（子载波间隔增大，OFDM符号长度变短），过渡时间相对于OFDM符号长度比重就越大，PUCCH传输性能对于过渡时间越敏感，则由于过渡时间的开销，调频并不是总能带来增益，且可能降低系统资源利用率。</p>
<h3 id="PUCCH格式"><a href="#PUCCH格式" class="headerlink" title="PUCCH格式"></a>PUCCH格式</h3><ul>
<li><p>PUCCH格式0：PUCCH0格式0为短PUCCH，时域占用1-2个OFDM符号，用于传输1-2bit的HARQ-ACK和SR（调度请求）。为了保证一个OFDM符号上较低的峰均功率比（PAPR）特性以及多用户复用特性，PUCCH格式0不适用参考信号，在其占用的每个OFDM符号上采用序列选择方式传输1-2bit HARQ-ACK。频域上，PUCCH格式0仅占用一个RB传输，用较小的资源开销承载1-2bit传输，频域资源的增加对1~2bit的传输性能增益影响不大，但却会较大程度上增加PUCCH的资源开销。</p>
</li>
<li><p>PUCCH格式1：PUCCH格式1为长PUCCH，在时域上可以占用4-14个OFDM符号，用于承载1-2bitHARQ-ACK和SR。为了保证较低的PAPR，进一步提升多用户复用传输容量，PUCCH格式1沿用了LTE PUCCH格式1a&#x2F;1b的传输结构。基于PUCCH格式0同样的原因，PUCCH格式1在频域上占用1个RB。</p>
</li>
<li><p>PUCCH格式2：PUCCH格式2为短PUCCH，时域占用1-2个OFDM符号，用于传输大于2bit的UCI。由于承载容量较大，需要采用信道编码方式传输UCI，且考虑到PUCCH仅占用一个OFDM符号时不能支持UCI和DM-RS的TDM传输，PUCCH格式2采用UCI和DM-RS在同一个OFDM符号上的FDM结构。UCCH格式2的频域资源可以配置1~16个RB，这是为了能够调制RB数量来承载不同的UCI比特数。</p>
</li>
</ul>
<img src="/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%BA%8C-%E4%B8%8A%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/%E5%9B%BE2.png" class>

<ul>
<li>PUCCH格式3&#x2F;4：PUCCH格式3&#x2F;4属于长PUCCH，在时域上可以占用4~14个OFDM符号，用于承载大于2bit的UCI传输。PUCCH格式3的传输结构基本沿用LTE中PUCCH格式4的传输结构，UCI和DM-RS采用TDM方式进行复用传输。PUCCH格式4的传输结构与PUCCH格式3基本一致，唯一差别在于在PUCCH格式3的基础上对UCI进一步引入频域扩频，以实现一定的多用户服用容量，降低PUCCH的资源开销。</li>
</ul>
<img src="/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%BA%8C-%E4%B8%8A%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/%E5%9B%BE3.png" class>

<h3 id="PUCCH资源分配"><a href="#PUCCH资源分配" class="headerlink" title="PUCCH资源分配"></a>PUCCH资源分配</h3><p>PUCCH资源分配包括两个阶段：第一阶段是UE在配置专用的PUCCH资源之前的PUCCH资源分配，即<strong>公共PUCCH资源分配</strong>；第二阶段是UE在配置了专用的PUCCH资源之后的PUCCH资源分配，即<strong>专用资源分配</strong>。公共PUCCH资源分配方法应用于初始接入和初始接入后但没有配置专用PUCCH资源两个场景；专用PUCCH资源分配应用于UE获得了高层信令配置的专用PUCCH资源之后。</p>
<h4 id="专用PUCCH资源分配"><a href="#专用PUCCH资源分配" class="headerlink" title="专用PUCCH资源分配"></a>专用PUCCH资源分配</h4><p>NR通过高层信令直接配置每个PUCCH资源所需的各种参数，包括时域、频域和码域资源。</p>
<p>1.PUCCH资源配置至少包括如下参数</p>
<ul>
<li>PUCCH的资源标识（ID）</li>
<li>起始RB编号，应用与不使用调频或者使用跳频的第一个跳频部分</li>
<li>第二个跳频部分的起始RN编号</li>
<li>时隙内跳频指示</li>
<li>PUCCH格式指示，这里面包含了不同PUCCH格式所需要的专属参数</li>
</ul>
<p>对于半静态配置的UCI传输，使用高层信令半静态地配置PUCCH资源。</p>
<p>对于PDCCH调度的HARQ-ACK传输，使用高层信令与DCI相结合的方式确定传输HARQ-ACK的PUCCH资源。</p>
<h4 id="公共PUCCH资源分配"><a href="#公共PUCCH资源分配" class="headerlink" title="公共PUCCH资源分配"></a>公共PUCCH资源分配</h4><p>初始接入时，UE没有建立EEC，PUCCH资源是通过广播信息配置的，是一种公共资源。在初始介入阶段，没有CSI和SR传输，PUCCH资源主要为HARQ-ACK反馈服务，且HARQ-ACK不超过2bit。</p>
<p>公共PUCCH资源信息的配置包含两个步骤，首先是通过SIB1通知PUCCH配置编号，确定一个公共的PUCCH资源集和；其次，HARQ-ACK资源指示相一致的方式，通过DCI与CCE相结合的方式在该公共PUCCH资源集和中确定一个PUCCH资源。</p>
<h3 id="上行控制信息传输"><a href="#上行控制信息传输" class="headerlink" title="上行控制信息传输"></a>上行控制信息传输</h3><h4 id="HARQ-ACK码本"><a href="#HARQ-ACK码本" class="headerlink" title="HARQ-ACK码本"></a>HARQ-ACK码本</h4><p>HARQ-ACK是UE向基站传输的是否正确接收PDSCH的反馈信息。HARQ-ACK码本是一个在PUCCH或PUSCH上传输的HARQ-ACK反馈信息序列，每个比特和传输块或码块组对应，每个比特指示对应的传输块或码块组是否被正确接收。</p>
<h4 id="上行控制信息在PUCCH上的传输过程"><a href="#上行控制信息在PUCCH上的传输过程" class="headerlink" title="上行控制信息在PUCCH上的传输过程"></a>上行控制信息在PUCCH上的传输过程</h4><p>1.HARQ-ACK传输</p>
<p>​        在获得专属的RRC配置信息之前，仅支持UE反馈1bit的HARQ-ACK信息，并按照资源分配方案获取用于传输HARQ-ACK的PUCCH资源。</p>
<p>​        在获得专属的RRC配置信息之后，UE可以确定专属配置信息。在接收到PDSCH或者SPS PDSCH释放之后，UE按照对应的HARQ-ACK反馈时序确定在哪个位置反馈HARQ-ACK，并确定码本大小和内容，以及用于传输HARQ-ACK的PUCCH资源。</p>
<p>2.CSI传输</p>
<img src="/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%BA%8C-%E4%B8%8A%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/%E5%9B%BE4.png" class>

<p>3.SR传输</p>
<p>在NR中，支持以时隙整数倍为单位的SR周期，以及小于一个时隙的传输周期。当传输周期大于等于一个时隙，根据高层配置的SR周期以及时隙偏移值确定SR的传输机会；当传输周期小于一个时隙时，根据高层配置的SR周期以及一个时隙内的其实符号偏移值确定SR的传输机会。</p>
<h4 id="上行控制信息在PUSCH上的传输过程"><a href="#上行控制信息在PUSCH上的传输过程" class="headerlink" title="上行控制信息在PUSCH上的传输过程"></a>上行控制信息在PUSCH上的传输过程</h4><p>因为NR R15不支持PUCCH和PUSCH同时传输，因此在二者传输时间重叠时需要选择一种信道传输。规定当承载SR的PUCCH与不承载UL-SCH的PUSCH重叠时，丢弃PUSCH，传输承载SR的PUCCH。其他情况，可以将PUCCH承载的UCI转移到PUSCH进行传输。UCI在PUSCH上的传输过程如下：</p>
<ol>
<li><p>选择PUSCH，具体规则如下：</p>
<img src="/2022/05/03/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-03-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%BA%8C-%E4%B8%8A%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/%E5%9B%BE5.png" class>
</li>
<li><p>将UCI映射到所选PUSCH上</p>
<p>为了保证OFDM和DFT-s-OFDM波形下的统一映射规则，规定UCI不能映射在PUSCH的DM-RS符号上；为了避免与PT-RS相互干扰，UCI也不能映射在PT-RS所占用的RE资源上；UCI在其他可用的RE资源上采用先频域后时域的映射规则进行映射。</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/05/02/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-02-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%B8%80-%E4%B8%8B%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/me.jpg">
      <meta itemprop="name" content="水中岚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水中岚">
      <meta itemprop="description" content="水中岚的博客">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 水中岚">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/05/02/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-02-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%B8%80-%E4%B8%8B%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/" class="post-title-link" itemprop="url">第6章-控制信道设计与资源调度(一)-下行控制信道</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-05-02 09:51:48" itemprop="dateCreated datePublished" datetime="2022-05-02T09:51:48+08:00">2022-05-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-04 20:59:22" itemprop="dateModified" datetime="2022-05-04T20:59:22+08:00">2022-05-04</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>1.物理下行控制信道功能：主要用于承载下行调度许可、上行调度许可等动态调度信息。相比于LTE，NR 采取了更为灵活的设计方式，如控制资源合集CORESET和搜索空间独立定义，并引入监听时机的定义等，以适应灵活多变的时隙结构。</p>
<p>2.物理上行控制信道功能：主要用于承载混合自动重传请求确认、调度请求和信道状态信息等上行控制信息。</p>
<h1 id="下行控制信道"><a href="#下行控制信道" class="headerlink" title="下行控制信道"></a>下行控制信道</h1><p>NR PDCCH以控制资源集合（CORESET）为单位配置资源，CORESET占用的PRB个数以及PRB位置均可根据网络部署情况灵活选择，不必占满整个带宽，也不限于带宽内的特定位置。CORESET的时频资源可以灵活配置，避免了类似于LTE的PDCCH在小区之间产生的持续干扰，提供了控制小区干扰的便利手段。为了支持低时延业务，NR允许在一个时隙内有多个PDCCH发生机会，即可以在时隙内多个候选OFDM符号位置上发生PDCCH。</p>
<h2 id="信道结构"><a href="#信道结构" class="headerlink" title="信道结构"></a>信道结构</h2><h3 id="控制资源集合CORESET"><a href="#控制资源集合CORESET" class="headerlink" title="控制资源集合CORESET"></a>控制资源集合CORESET</h3><p>1.<strong>控制资源集和是用于下行控制信道传输的物理资源集和</strong>，以6个连续PRB为资源粒度进行配置。CORESET的频域资源是连续或者非连续的，时域上包括连续的1~3个OFDM符号。</p>
<p>2.在一个BWP（带宽部分）内，基站可以通过MIB（Master InformationBlock）、SIB（System Information Block）或者专用RRC信令为UE配置至多<strong>3个</strong>CORESET。配置多个CORESET的主要目的是：</p>
<ul>
<li><p>可通过不同CORESET的对应的不同下行波束传输PDCCH，某些CORESET用较宽的波束传输以获得较稳定的覆盖范围，其他CORESET用较窄波束传输以获得较大的波束赋形增益。</p>
</li>
<li><p>实现相邻小区的频域干扰协调：通过配置不同频域资源位置的CORESET，这样基站在向UE发送PDCCH时可以选择受到邻区干扰较小的CORESET，有利于保证下行控制信道的传输质量。</p>
</li>
<li><p>优化不同信道状况下的传输性能。配置分布式映射的CORESET获得频率分集增益，用于抵抗衰落信道带来的性能恶化；配置集中式映射的CORESET获得频率选择性增益，用于信道状态信息可靠的情况。基站可以根据信道状态信息的可靠程度，选择合适的CORESET传输PDCCH。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/m_052148/article/details/51994477%E3%80%90LTE%E4%B8%8B%E8%A1%8C%E7%89%A9%E7%90%86%E5%B1%82%E4%BC%A0%E8%BE%93%E6%9C%BA%E5%88%B6-%E9%9B%86%E4%B8%AD%E5%BC%8F%E5%92%8C%E5%88%86%E5%B8%83%E5%BC%8F%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84%E3%80%91">https://blog.csdn.net/m_052148/article/details/51994477【LTE下行物理层传输机制-集中式和分布式资源映射】</a></p>
</li>
<li><p>支持不同时延要求业务的下行控制信道传输。配置一个OFDM符号长度的CORESET，缩短PDCCH传输的时间，降低时延；配置2个或3个OFDM符号长度的CORESET，增加PDCCH传输可用的资源，提高传输可靠性。</p>
</li>
</ul>
<h3 id="PDCCH的物理结构"><a href="#PDCCH的物理结构" class="headerlink" title="PDCCH的物理结构"></a>PDCCH的物理结构</h3><p>1.NR资源单元组（Resource Element Group，REG）是CORESET内最基本的<strong>物理资源单元</strong>。一个REG由一个OFDM符号上的12RE组成（即一个OFDM符号上的一个PRB，第4章提过：一个PRB由12个子载波组成，所以这里的RE指的是子载波），包含3个DM-RS RE。一个CORESET内的REG按先时域后频域从0开始编号。</p>
<img src="/2022/05/02/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-02-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%B8%80-%E4%B8%8B%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/%E5%9B%BE1.png" class>

<p>2.REG组由CORESET内若干个连续的REG组成，是NR PDCCH资源映射和预编码的基本单位。同一个REG组内的REG使用相同的预编码矩阵传输，因此UE在一个REG组的范围内可以进行联合信道估计，获得联合处理的增益。在REG组之间可以实现预编码矩阵轮循传输，以获得分集增益。</p>
<p>3.REG组可以包含2个、3个或者6个REG，这将有高层信令配置。较小的REG组在使用预编码矩阵轮循时可以获得更大的分集增益，在信道条件较好时有利于提升PDCCH的接收性能；较大的REG组能够获得额外的信道估计增益，通常用于信道条件较差时的PDCCH传输。</p>
<p>4.NR控制信道单元（CCE）是确定搜索空间以及候选PDCCH资源分配的<strong>逻辑资源单位</strong>。一个CCE由6个REG构成。</p>
<p>5.针对CCE到REG的映射，NR协议支持<strong>集中式映射</strong>和<strong>分布式映射</strong>两种方式。</p>
<ul>
<li>集中式映射：即CCE映射到连续的REG，且REG组的大小必须为6。如果基站可以获得信道质量信息，通过集中式映射将CCE映射到信道质量较好的REG，则可以获得频率选择性增益。</li>
<li>分布式映射：通过一个块交织器将CCE映射到分散的REG组。</li>
</ul>
<h2 id="传输方案"><a href="#传输方案" class="headerlink" title="传输方案"></a>传输方案</h2><h3 id="PDCCH多天线方案"><a href="#PDCCH多天线方案" class="headerlink" title="PDCCH多天线方案"></a>PDCCH多天线方案</h3><p>1.NR PDCCH仅支持单流传输，不支持空分复用传输，因为PDCCH设计的首要目标是保证传输的可靠性，而不是高频谱效率。</p>
<p>2.NR PDCCH支持单端口REG组间的预编码轮循传输的发射分级方案，在不同的REG组轮流应用不同的预编码矩阵，达到发射分集的效果。这一操作对UE是透明的。</p>
<p>补充：在预编码系统中，发射机可以根据信道条件，对发送信号的空间特性进行优化，使发送信号的空间分布特性与信道条件相匹配，因此可以有效降低对接收机算法的依赖程度。</p>
<h3 id="PDCCH解调参考信号"><a href="#PDCCH解调参考信号" class="headerlink" title="PDCCH解调参考信号"></a>PDCCH解调参考信号</h3><p>1.NR PDCCH用解调参考信号（DM-RS）解调。DM-RS在PDCCH映射到的每个REG内都存在，密度为1&#x2F;4，且每个REG内DM-RS都映射到固定位置的RE。DM-RS的密度是权衡信道估计信道和导频开销的重要因素，较高的密度有助于提高PDCCH的信道估计精度，过高的密度将造成REG内可用于传输下行控制信息的资源减少。</p>
<p>2.NR PDCCH的传输方案为单端口传输，预编码颗粒粒度可以配置为REG或者资源簇，一个CORESET内连续的多个REG构成资源簇，一个CORESET内可以有多个资源簇。</p>
<ul>
<li>如果预编码颗粒粒度配置为REG，则可以支持REG之间的预编码轮循传输，此时，DM-RS映射在PDCCH实际占用的所有REG上。</li>
<li>如果哦预编码颗粒粒度为资源簇，则应该假设一个资源簇内REG是相同的预编码。此时DM-RS映射到的资源簇内的所有连续的REG上，即DM-RS会存在于PDCCH实际映射的REG之外。</li>
</ul>
<img src="/2022/05/02/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-05-02-%E7%AC%AC6%E7%AB%A0-%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6-%E4%B8%80-%E4%B8%8B%E8%A1%8C%E6%8E%A7%E5%88%B6%E4%BF%A1%E9%81%93/%E5%9B%BE2.png" class>

<h3 id="搜索空间设计"><a href="#搜索空间设计" class="headerlink" title="搜索空间设计"></a>搜索空间设计</h3><p>1.盲检过程：根据承载的下行控制信息（DCI）的比特数和信道状况，基站可以选择使用1个、2个、4个、8个或16个连续的控制信道单元（CCE）承载一条DCI，承载一条DCI的CCE个数称为<strong>聚合等级</strong>。UE在检测PDCCH时，要在不同的候选PDCCH上按照特定的DCI格式以及无线网络临时标识（RNT1）来检测DCI。候选PDCCH的资源位置由CCE的起始位置和聚合等级确定。</p>
<p>UE在检测DCI时并不知道基站是否发送了DCI，也不知道实际发送该DCI所使用的CCE的聚合等级和起始位置，所以UE需要对候选PDCCH进行逐个尝试，将这一过程称为候选PDCCH的<strong>盲选</strong>。</p>
<p>2.<strong>搜索空间</strong>由UE需要盲检的一组候选PDCCH组成。PDCCH的搜索空间分为公共搜索空间（CSS）与特定搜索空间（USS）。顾名思义，面向一组UE的公共控制信息通过CSS进行发送。UE的专属调度信息通过USS进行发送，也可以通过CSS发送。其中CSS根据传输内容以及配置方法的不同，分为Type0&#x2F;0A&#x2F;1&#x2F;2&#x2F;3-PDCCH CSS，分别应用于RMSI、OSI、RAR&#x2F;Msg4、Paging以及公共控制信息的调度或者传输。</p>
<h3 id="控制信息内容与格式"><a href="#控制信息内容与格式" class="headerlink" title="控制信息内容与格式"></a>控制信息内容与格式</h3><p>1.NR的下行控制信息格式可以分为以下三大类：</p>
<ul>
<li>回退DCI格式：信息域固定，只能支持最基本的调度，可以用于回退模式的场景。</li>
<li>非回退DCI格式：部分信息域可以通过高层信令进行配置，支持不同的调度场景和业务需求。</li>
<li>组公共DCI格式：用于传输一组UE的控制信息，不用于资源调度。</li>
</ul>
<p>组公共控制信道通过UE专用RRC信令配置，用来发送一组特定UE的下行控制信令，信道结构与控制信道结构相同，只是DCI格式不同。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/28/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-28-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%BA%94-%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/me.jpg">
      <meta itemprop="name" content="水中岚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水中岚">
      <meta itemprop="description" content="水中岚的博客">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 水中岚">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/28/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-28-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%BA%94-%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86/" class="post-title-link" itemprop="url">第5章-系统初始接入与移动性管理设计(五)-移动性管理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-04-28 09:57:37 / 修改时间：14:47:11" itemprop="dateCreated datePublished" datetime="2022-04-28T09:57:37+08:00">2022-04-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="移动性管理"><a href="#移动性管理" class="headerlink" title="移动性管理"></a>移动性管理</h1><p>NR定义了3种RRC状态：空闲（RRC_IDLE）、非激活（RRC_INACTIVE）和连接（RRC_CONNECTED）。</p>
<ol>
<li><p><strong>RRC_IDLE状态下：</strong>UE的移动性管理包括小区选择和小区重选两个过程；</p>
<p>小区选择：一个UE通过测量移动性管理的参考信号，寻求识别合适小区或可接受小区并驻留到该小区的过程。</p>
<p>小区重选：一个已经驻留在某个小区上的UE继续监视和测量当前驻留小区和其他小区的移动性管理参考信号，并根据比较各小区信号强弱来决定是否继续留在当前驻留小区或重新选择驻留小区的过程。</p>
<p>小区选择和小区重选两个过程都依赖于<strong>无线资源管理（RRM）</strong>的设计和测量。</p>
</li>
<li><p><strong>RRC_INACTIVE状态下：</strong>UE的移动性管理仅涉及小区重选过程。</p>
</li>
<li><p><strong>RRC_CONNECTED状态下：</strong>UE的移动性管理包括小区之间的移动性管理和小区内部的波束之间的切换管理。此外，UE还需要进行<strong>无线链路检测（RLM）</strong>。</p>
<p>小区之间的切换：通过RRC信令来控制，并依赖于RRM设计和测量。</p>
<p>RLM过程：UE连续监视服务小区的下行链路无线链路质量，确定UE与服务小区处于同步（IS）或失步（OOS）状态，并周期性将IS&#x2F;OSS状态上报给高层。</p>
</li>
</ol>
<h2 id="移动性管理参考信号"><a href="#移动性管理参考信号" class="headerlink" title="移动性管理参考信号"></a>移动性管理参考信号</h2><p>1.空闲与非激活状态：NR协议规定NR SSB包含的辅同步信号（SSS）作为支持RRC_IDLE或RRC_INACTIVE状态下UE的移动性管理的参考信号。此外，UE还可以采用PBCH DM-RS作为辅助移动性管理参考信号提供RRM的测量性能。令SSB-RS代表SSB中可用于移动性管理的参考信号，包括NR SSS和NR PBCH DM-RS</p>
<p>2.连接状态：两种移动性管理参考信号，一是SSB-RS，二是NR CSI-RS。</p>
<p>3.基于SSB-RS的移动性管理有以下两种局限：</p>
<ul>
<li>SSB传输带宽是固定的，而实际系统传输带宽可能远远大于SSB传输带宽，因此基于SSB-RS的RRM测量不一定能真实地反映SSB传输带宽之外的下行链路无线链路质量。</li>
<li>小区SSB的传输周期配置要考虑小区资源使用的平衡，网络难以按某个或某些UE的移动性管理的需要来改变每个小区配置的SSB传输周期</li>
</ul>
<p>4.基于CSI-RS的RRM测量：网络可按UE的移动性管理的需要来灵活配置RRM CSI-RS的优化使用时频资源。</p>
<h2 id="基于SSB的RRM测量参数"><a href="#基于SSB的RRM测量参数" class="headerlink" title="基于SSB的RRM测量参数"></a>基于SSB的RRM测量参数</h2><ul>
<li><p>SS参考信号接收功率（SS-RSRP）：SSB-RS信号资源单元上测量的SSB-RS信号功率线性平均值，表示所测量的SSB的信号强度。</p>
</li>
<li><p>SS参考信号接收质量（SS-RSRQ）：$(N×SS-RSRP)&#x2F;(NR 载波RSSI)$，N是NR载波测量带宽的资源块的数量。NR载波接收信号强度指示（RSSI）表示在测量带宽中，针对N各资源块，用于测量RSSI的OFDM符号上观察到的所有信号的总接收功率。</p>
</li>
<li><p>SS信噪比（SS-SINR）：SS-RSRP与测量SS-RSRP相同资源上的干扰和噪声功率的线性平均值之比。</p>
</li>
</ul>
<p>其中，SS-SINR仅用于RRC_CONNECTED状态下，而SS-RSRP和SS-RSRQ可用于3种RRC状态下。</p>
<h2 id="基于CSI-RS的RRM测量参数"><a href="#基于CSI-RS的RRM测量参数" class="headerlink" title="基于CSI-RS的RRM测量参数"></a>基于CSI-RS的RRM测量参数</h2><ul>
<li>CSI-RS参考信号接收功率（CSI-RSRP）：在所配置的带宽内，CSI-RS资源单元上测量CSI-RS信号功率的线性平均值。CSI-RSRP表示所测量的CSI-RS的信号强度。</li>
<li>CSI-RS参考信号接收质量（CSI-RSRQ）：$(N×CSI-RSRP)&#x2F;(CSI-RSSI)$，N是CSI-RSSI测量带宽中的资源块的数量。CSI-RSRP和CSI-RSI的测量频率带宽相同。CSI-RSSI为测量时间资源和测量带宽中，针对N个资源块上的总接收信号功率的线性平均值。</li>
<li>CSI-RS信干噪比（CSI-SINR）：CSI-RSRP与在CSI-RSRP相同频带带宽内，CSI-RS资源单元上的噪声和干扰功率的线性平均值的比值。</li>
</ul>
<h2 id="无线链路监测（RLM）"><a href="#无线链路监测（RLM）" class="headerlink" title="无线链路监测（RLM）"></a>无线链路监测（RLM）</h2><p>无线链路检测：一个RRC_CONNECTED状态的UE通过测量服务小区的下行链路RLM参考信号（RLM-RS）来监测下行无线链路质量，得到反映下行无线链路质量的测量值，如SS-SINR或CSI-SINR，并将测量值与UE内部设定的同步和失步阙值进行比较来判断UE与服务小区处于下行同步还是失步状态的过程。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/28/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-28-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E5%9B%9B-%E5%AF%BB%E5%91%BC%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/me.jpg">
      <meta itemprop="name" content="水中岚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水中岚">
      <meta itemprop="description" content="水中岚的博客">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 水中岚">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/28/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-28-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E5%9B%9B-%E5%AF%BB%E5%91%BC%E4%BF%A1%E9%81%93%E8%AE%BE%E8%AE%A1/" class="post-title-link" itemprop="url">第5章-系统初始接入与移动性管理设计(四)-寻呼信道设计</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-04-28 09:30:56 / 修改时间：09:56:31" itemprop="dateCreated datePublished" datetime="2022-04-28T09:30:56+08:00">2022-04-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="寻呼信道设计"><a href="#寻呼信道设计" class="headerlink" title="寻呼信道设计"></a>寻呼信道设计</h1><p>1、寻呼的目的：</p>
<ul>
<li>通知处于RRC_IDLE和RRC_INACTIVE状态的UE，重新连接到网络以开始新的数据服务</li>
<li>提示处于RRC_IDLE、RRC_INACTIVE和RRC_CONNECTED状态的UE系统信息已改变，UE应该重新获取新的系统信息</li>
<li>对所有RRC状态下的UE发送地震和海啸预警系统等指示。</li>
</ul>
<p>2、网络通过在UE的寻呼时机（PO）处发送寻呼消息和&#x2F;或指示来发起寻呼过程。一个PO包括一组S个连续的寻呼PDCCH监听时机，S等于SIB1种参数ssb-PositionInBurst提供的实际发送的SSB数量。所以PO中第k个监听时机对应于SSB突发集实际发送的第k个SSB，所以一个PO中不同监听时机对应于不同的波束方向，从而在一个PO中的所以监听时机处发送寻呼消息和&#x2F;或指示，就相当于完成一次寻呼过程的波束扫描。</p>
<h2 id="寻呼方法"><a href="#寻呼方法" class="headerlink" title="寻呼方法"></a>寻呼方法</h2><p>NR支持的寻呼方法是：若要寻呼某个UE，基站以波束扫描的方式，通过给该UE配置的各个监听时机对该UE发送寻呼下行控制信息（DCI），以及由寻呼DCI调度的PDSCH携带的寻呼消息。</p>
<h2 id="寻呼控制资源集和寻呼监听时机"><a href="#寻呼控制资源集和寻呼监听时机" class="headerlink" title="寻呼控制资源集和寻呼监听时机"></a>寻呼控制资源集和寻呼监听时机</h2><p>UE在Type2-PDCCH CSS中搜索承载寻呼DCI的PDCCH，但网络并不必为UE专门配置用于Type2-PDCCH CSS的CORESET，NR规定Type2-PDCCH CSS的CORESET与CORESET#完全相同。</p>
<p>网络可用高层参数pagingSearchSpace为UE专门配置Type2-PDCCH CSS，如果没有配置，则默认与Type0-PDCCH CSS相同。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/27/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-27-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%89-%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5%E8%AE%BE%E8%AE%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/me.jpg">
      <meta itemprop="name" content="水中岚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水中岚">
      <meta itemprop="description" content="水中岚的博客">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 水中岚">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/27/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-27-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%89-%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5%E8%AE%BE%E8%AE%A1/" class="post-title-link" itemprop="url">第5章-系统初始接入与移动性管理设计(三)-随机接入设计</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-04-27 15:45:32 / 修改时间：20:59:55" itemprop="dateCreated datePublished" datetime="2022-04-27T15:45:32+08:00">2022-04-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="随机接入设计"><a href="#随机接入设计" class="headerlink" title="随机接入设计"></a>随机接入设计</h1><p>随机接入设计的主要目的是使UE获取上行时间同步，并在UE建立初始无线链路（即UE从RRC_IDLE转换到RRC_CONNECTED）时，可以通过随机接入过程获取用户标识-小区无线网络临时标识信息（C-RNT1）。</p>
<p>NR支持竞争和非竞争的随机接入过程，支持基站的下行发送波束扫描和上行接受波束扫描，同时支持UE的上行发送波束扫描。</p>
<h2 id="随机接入过程"><a href="#随机接入过程" class="headerlink" title="随机接入过程"></a>随机接入过程</h2><p>1.NR支持四步随机接入过程：</p>
<ol>
<li><p>UE在物理随机接入信道（PRACH）资源上发送随机接入前导码（Preamble）序列（即消息1，Msg1）</p>
<p>在随机接入过程之前，UE通过SIB1消息获得SSB索引的集合、物理随机接入信道时频资源、PRACH Preamble格式和PRACH Preamble序列集合的参数，然后UE根据所获得的信息，生成PRACH Preamble序列，并在选定的PRACH时频资源上发送随机接入<strong>Preamble序列</strong>。</p>
</li>
<li><p>UE在PDCCH&#x2F;PDSCH上接收随机接入相应（RAR）消息（即消息2，Msg2）</p>
<p>基站针对Preamble序列进行检测，如果基站检测到Preamble序列，则在PDCCH&#x2F;PDSCH上反馈相应的<strong>RAR消息</strong>。UE在发送Preamble序列之后，在一个RAR时间窗口内检测下行PDCCH&#x2F;PDSCH反馈的RAR消息。</p>
</li>
<li><p>UE在PUSCH上发送消息3</p>
<p>RAR信息种包含UE的上行定时提前调整量和调度该UE的消息3传输的上行调度许可。当UE检测到RAR消息后，UE根据上行定时提前调整量获得<strong>上行同步</strong>，并根据上行调度许可在PUSCH上发送消息3（如承载高层的RRC请求消息）</p>
</li>
<li><p>UE在PDSCH上接收竞争解决消息（即消息4，Msg4）</p>
<p>基站接收并解析消息3包含的UE标识之后，在PDSCH上发送消息4。UE在PDSCH上接收消息4包含的竞争解决并解码，在竞争解决成功之后完成四步随机接入过程。</p>
</li>
</ol>
<img src="/2022/04/27/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-27-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%89-%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5%E8%AE%BE%E8%AE%A1/%E5%9B%BE1.png" class title="四步和两步随机接入过程">

<h2 id="随机接入Preamble格式"><a href="#随机接入Preamble格式" class="headerlink" title="随机接入Preamble格式"></a>随机接入Preamble格式</h2><p>NR随机接入前导码（Preamble）采用Zadoff-Chu（ZC）序列。</p>
<p>PRACH Preamble由一个循环前缀（CP）和一个或多个Preamble序列组成，每个Preamble序列占用一个PRACH OFDM符号。保护时间（GT）在协议种未显示定义，而是通过PRACH Preamble所在的时隙和其他时隙对齐。</p>
<p>NR R15规定PRACH Preamble格式如下：</p>
<img src="/2022/04/27/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-27-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%89-%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5%E8%AE%BE%E8%AE%A1/%E5%9B%BE2.png" class>

<p><strong>选项1：</strong>在连续重复PRACH OFDM符号的开头插入CP，在末尾保留GT，并在各个<strong>重复</strong>的PRACH序列之间省略CP和GT。优点：小区的覆盖性能优于选项2和选项3。缺点：PRACH Preamble容量受限。NR R15所采纳。</p>
<p><strong>选项2：</strong>PRACH Preamble由N个<strong>重复</strong>的Preamble序列构成，在每个Preamble序列的前面添加CP，只在所有的Preamble序列的末尾保留GT，中间的Preamble序列的后面省略GT。</p>
<p><strong>选项3：</strong>PRACH Preamble由N个<strong>不同</strong>的Preamble序列构成，在每个Preamble序列的前面添加CP，只在所有的Preamble序列的末尾保留GT。</p>
<h2 id="PRACH时频资源配置"><a href="#PRACH时频资源配置" class="headerlink" title="PRACH时频资源配置"></a>PRACH时频资源配置</h2><p>PRACH资源为周期性资源。</p>
<p>PRACH资源的时域位置采用PRACH配置周期、无线帧索引、子帧、时隙索引、时隙内的起始PRACH OFDM符号索引和时域随机接入时机（RO）个数来定义。PRACH配置周期的候选值为{10，20，40，80，160}ms，每个PRACH配置周期内PRACH资源只分布在一个有效的无线帧（10ms）内，该有效无线帧包含一个或者多个子帧&#x2F;时隙，在每个子帧&#x2F;时隙内只有一种起始PRACH OFDM符号索引，一个时隙内有一个或多个时域RO。</p>
<p>频域上，不同的PRACH Preamble格式和子载波间隔共同确定了PRACH占用的频域带宽。</p>
<h2 id="多波束接入过程设计"><a href="#多波束接入过程设计" class="headerlink" title="多波束接入过程设计"></a>多波束接入过程设计</h2><p>波束互易性：一个设备可以根据接收波束推导确定其发送波束；或者由发射波束来推导确定接收波束的这种特性。</p>
<p>在NR高频段传输种，由于高频段传播损耗大，在随机接入过程需要考虑小区覆盖范围，所以UE也应该采用波束赋形进行发送和接收，才能满足高频段的覆盖要求。而随机接入过程是UE第一次与网络进行通信，之前没有和网络交互，无法通过预先的信令交互完成波束的配置和对齐。因此随机接入过程所采用的4个消息所采用的发送波束和接收波束是随机接入在高频段的主要问题。随机接入过程需要确定的波束包括：UE发送消息1和消息3的发送波束，UE接收消息2和消息4的接受波束，基站接收消息1和消息3的接收波束，基站发送消息2和消息4的发送波束。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/27/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-27-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%BA%8C-%E5%B9%BF%E6%92%AD%E4%BF%A1%E5%8F%B7%E4%BC%A0%E8%BE%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/me.jpg">
      <meta itemprop="name" content="水中岚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水中岚">
      <meta itemprop="description" content="水中岚的博客">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 水中岚">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/27/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-27-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%BA%8C-%E5%B9%BF%E6%92%AD%E4%BF%A1%E5%8F%B7%E4%BC%A0%E8%BE%93/" class="post-title-link" itemprop="url">第5章-系统初始接入与移动性管理设计(二)-广播信号传输</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-04-27 14:12:18 / 修改时间：16:01:06" itemprop="dateCreated datePublished" datetime="2022-04-27T14:12:18+08:00">2022-04-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="广播信号传输"><a href="#广播信号传输" class="headerlink" title="广播信号传输"></a>广播信号传输</h1><p>NR广播的系统信息包括主信息块（MIB）、剩余最小系统信息（RMSI）和其他系统信息（OSI）。RMSI通过系统信息块（SIB1）传输，OSI通过SIB1之外的系统信息块传输。MIB中携带了UE访问NR网络所需的最小系统信息的一部分，其中包括获取SIB1所需的配置参数。而SIB1中包含获取其他系统信息块所需的参数，SIB1在PDSCH上传输，传输时间间隔为160ms，且SIB1可重复传输。重复传输周期与小区定义SSB的传输周期一样。</p>
<h2 id="小区定义SSB和非小区定义SSB"><a href="#小区定义SSB和非小区定义SSB" class="headerlink" title="小区定义SSB和非小区定义SSB"></a>小区定义SSB和非小区定义SSB</h2><p><strong>预备知识：</strong></p>
<p>CORESET称为“控制资源集”，是下行资源网络中特定区域内的一组物理资源，用于承载PDCCH。</p>
<p>PDCCH承载的是下行控制信息（DCI）,根据DCI的不同可将PDCCH分为不同的类型。</p>
<p>定义Type0-PDCCH 公共搜索空间（CSS）的CORESET简称为CORESET#0。CORESET#0主要是定义Type0-PDCCH CSS的时间和频率资源以及Type0-PDCCH CSS的监听时机。</p>
<p><strong>小区定义SSB：</strong>携带关联的CORESET#0的配置信息以及Type0-PDCCH CSS的监听时机的配置信息。而UE根据CORESET#0和Type0-PDCCH CSS的信息搜索调度SIB1 NR PDSCH的NR PDCCH，以便解调接收SIB1，进而获得接入无线网络系统所需的最小系统信息。</p>
<p><strong>非小区定义SSB：</strong>不携带CORESET#0的配置信息，主要用途是无线资源管理（RRM）。</p>
<p>当UE在小区搜索期间检测到某一个SSB时，UE首先需要确定该SSB是CD-SSB还是NCD-SSB。</p>
<h2 id="SSB和CORESET-0的复用模式"><a href="#SSB和CORESET-0的复用模式" class="headerlink" title="SSB和CORESET#0的复用模式"></a>SSB和CORESET#0的复用模式</h2><p><strong>复用模式1：</strong>在时域上，SSB和关联的CORESET#0出现在不同的时刻。在频域上，SSB传输带宽被CORESET#0传输带宽所覆盖。</p>
<p><strong>复用模式2：</strong>在时域上，SSB和关联的CORESET#0出现在不同的时刻。在频域上，SSB传位于CORESET#0的顶部或底部。</p>
<p><strong>复用模式3</strong>：在时域上，SSB和关联的CORESET#0出现在相同的OFDM符号种。在频域上，SSB正好位于CORESET#0的顶部或底部。</p>
<ul>
<li><input disabled type="checkbox"> 本节剩余内容有点不懂，等后面再学习</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/26/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-26-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%80-NR%E5%90%8C%E6%AD%A5%E5%9D%97%E4%B8%8EPBCH%E4%BC%A0%E8%BE%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/me.jpg">
      <meta itemprop="name" content="水中岚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水中岚">
      <meta itemprop="description" content="水中岚的博客">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 水中岚">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/26/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-26-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%80-NR%E5%90%8C%E6%AD%A5%E5%9D%97%E4%B8%8EPBCH%E4%BC%A0%E8%BE%93/" class="post-title-link" itemprop="url">第5章-系统初始接入与移动性管理设计(一)-NR同步块与PBCH传输</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-04-26 15:31:17" itemprop="dateCreated datePublished" datetime="2022-04-26T15:31:17+08:00">2022-04-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-27 14:47:58" itemprop="dateModified" datetime="2022-04-27T14:47:58+08:00">2022-04-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>UE和网络进行数据传输之前，必须通过初始接入过程连接到网络。初始接入过程包括小区搜索、系统信息接收和随机接入等阶段。</p>
<p>小区搜索是UE利用小区同步信号进行下行时间和频率同步，以及获得物理小区标识（PCID）的过程。</p>
<p>通过小区搜索完成下行同步之后，UE接收并解码物理广播和承载最小系统信息的PDSCH，获取后续进行随机接入必需的系统信息。</p>
<p>在获取系统信息之后，UE通过随机接入过程实现上行时间同步，从非RRC连接态（RRC_IDLE和RRC_INACTIVE）进入RRC连接态（RRC_CONNECTED），为上、下行数据传输做好准备。</p>
<p>寻呼过程用于帮助网络寻呼正处于非RRC连接态的UE。</p>
<p>移动性管理对有效利用系统资源，保证网络对UE提供合理服务至关重要。</p>
<p>5G NR移动管理包括无线资源管理（RRM）和无线链路监视（RLM）。</p>
<h1 id="NR同步块（SSB）"><a href="#NR同步块（SSB）" class="headerlink" title="NR同步块（SSB）"></a>NR同步块（SSB）</h1><p>NR同步块（SSB）包括主同步信号（PSS）、辅同步信号（SSS）和物理广播信道（PBCH）。PBCH中包含解调参考信号（DM-RS）。</p>
<p>UE在进入NR系统时，首先要检测主同步信号和辅同步信号以获得下行时频同步以及物理小区标识，然后对PBCH进行解码。PBCH中包括主信息块（MIB）和其他与NR同步块传输时间有关的信息。主信息块中携带了UE接入NR系统所需的最小系统信息的一部分。</p>
<h2 id="SSB的结构和SSB突发集"><a href="#SSB的结构和SSB突发集" class="headerlink" title="SSB的结构和SSB突发集"></a>SSB的结构和SSB突发集</h2><p>1.SSB的结构</p>
<img src="/2022/04/26/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-26-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%80-NR%E5%90%8C%E6%AD%A5%E5%9D%97%E4%B8%8EPBCH%E4%BC%A0%E8%BE%93/%E5%9B%BE1.png" class title="SSB的结构">

<p>SSB中PSS、SSS、PBCH采用TDM的方式，一个SSB占用4个OFDM符号,一个SSB的带宽为20个PRB。每个SSB中PSS、SSS和PBCH采用相同的子载波间隔。</p>
<p>2.SSB搜索</p>
<p>初始接入时，UE不知道载波的具体带宽、频段内的载波带宽组合以及SSB在载波带宽中的位置。因此为了实现下行同步，UE按照<strong>同步栅格</strong>进行SSB搜索。SSB带宽的设计直接影响系统载波带宽中同步栅格的个数（正相关）。在一个系统载波带宽中，同步栅格的个数越多，UE搜索SSB所花费的时间就越多，而一个SSB内PSS、SSS和PBCH采用TDM相比于FDM可以减小SSB的带宽，从而减少同步栅格个数，降低搜索复杂度。</p>
<p>3.<strong>SSB突发集</strong></p>
<p>完成一次波束扫描所需的NR同步块组成了SSB突发集，SSB突发集是周期性传输的。配置较短的SSB突发集可以减少初始接入的时间延迟，降低UE测量SSB的时间和功耗，但会消耗较多的系统资源。反之，配置较长的SSB突发集周期可以减少SSB占用的资源，但可能会延长UE初始接入的时间。</p>
<h2 id="时间同步"><a href="#时间同步" class="headerlink" title="时间同步"></a>时间同步</h2><p>当检测到某个SSB时，UE将从SSB获取定时信息，以达到下行时间同步的目的。定时信息包括：系统帧号、半无线帧索引、半无线帧中的时隙索引和时隙中OFDM符号索引。</p>
<p>首先根据系统帧号以及半无线帧索引获取半无线帧中的位置。然后根据SSB时间索引，UE可结合NR标准规定的SSB在半无线帧中的位置，推断出该检测到的SSB在半无线帧中的时隙索引以及在该时隙中的OFDM符号索引。</p>
<h2 id="SSB在半无线帧中的位置"><a href="#SSB在半无线帧中的位置" class="headerlink" title="SSB在半无线帧中的位置"></a>SSB在半无线帧中的位置</h2><p>不同频率范围内一个SSB突发集的最大SSB个数不同，表示SSB时间索引所需的比特数不同。为了使UE根据检测到的SSB时间索引确定SSB在半无线帧中的位置，NR标准规定了各种场景中SSB的侯选位置在SSB半无线帧中相对半无线帧起始点的OFDM符号索引值，如表：</p>
<img src="/2022/04/26/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-26-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%80-NR%E5%90%8C%E6%AD%A5%E5%9D%97%E4%B8%8EPBCH%E4%BC%A0%E8%BE%93/%E5%9B%BE2.png" class>

<p>例1：NR SSB 模式A为例，检测到SSB时间索引值为2，即SSB半无线帧中的第3个SSB，根据下图：</p>
<img src="/2022/04/26/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-26-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%80-NR%E5%90%8C%E6%AD%A5%E5%9D%97%E4%B8%8EPBCH%E4%BC%A0%E8%BE%93/%E5%9B%BE3.png" class>

<p>结合表5-1，可知模式A下每个时隙有两个SSB，它们的起始OFDM符号分别为2和8，第3个SSB位于SSB半无线帧中的第2个时隙（$n&#x3D;1$）。所以相对半无线帧起始点的OFDM符号的索引值为14×1+2&#x3D;16</p>
<p>例2：NR SSB 模式D为例，检测到SSB时间索引值为7，即SSB半无线帧中的第8个SSB，根据下图：</p>
<img src="/2022/04/26/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-26-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%80-NR%E5%90%8C%E6%AD%A5%E5%9D%97%E4%B8%8EPBCH%E4%BC%A0%E8%BE%93/%E5%9B%BE4.png" class>

<p>结合表5-1，可知模式D下每2个有4个SSB，第8个SSB位于SSB半无线帧中的第4个时隙（$n&#x3D;1$）,所以相对半无线帧起始点的OFDM符号的索引值为28×1+20&#x3D;48</p>
<h2 id="SSB传输配置"><a href="#SSB传输配置" class="headerlink" title="SSB传输配置"></a>SSB传输配置</h2><p>在初始小区搜索时，UE没有任何关于SSB传输配置的信息，为了减少UE初始小区搜索的时间和功耗，NR在协议中定义了一些SSB传输配置参数的默认值，包括SSB子载波间隔、SSB模式和SSB发送周期。</p>
<ul>
<li>NR在协议中按频段规定了默认的SSB子载波间隔。对于大多数频段来说，协议规定了唯一的默认SSB子载波间隔，也规定了唯一的默认SSB模式。但是对于某些特殊的频段，协议规定了两个默认子载波间隔，目的是希望保持这些特殊频段部署的灵活度，且对于这两个默认子载波间隔，协议针对每个子载波间隔都定义了唯一的默认SSB模式。</li>
<li>对于支持初始小区搜索的小区，SSB实际发送周期可以是5ms，10ms和20ms。对于不支持初始小区搜索的小区，其SSB发送周期可以为{5，10，20，40，80，160}ms。对于网络没有指示SSB发送周期的小区，UE应假设SSB的实际发送周期为5ms。</li>
</ul>
<h2 id="实际传输SSB的指示"><a href="#实际传输SSB的指示" class="headerlink" title="实际传输SSB的指示"></a>实际传输SSB的指示</h2><p>NR协议规定了每个频率范围内一个SSB突发集的最大SSB个数，实际传输中一个SSB突发集的SSB个数可以小于或等于协议规定的最大数。未传输的SSB资源可以用来PDSCH传输。NR通过高层参数ssb-PositionsInBurst通知UE实际传输的SSB的位置和个数，使UE在接收PDSCH时能正确地进行速率匹配。</p>
<p>NR规定了ssb-PositionsInBurst的两种表达方式：</p>
<ul>
<li><p>两个8比特位图，即组内比特映射（inOneGroup）和组比特映射（groupPresence）。</p>
<p>当频率小于6GHz时，SSB突发集最大SSB个数不超过8。inOneGroup的每个比特代表相应的SSB的位置是否实际用于传输SSB。而groupPresence没有实际意义。</p>
<p>当频率大于6GHz时，SSB突发集的最大SSB为64，NR将64个候选SSB按位置次序分为8组，groupPresence的每个比特表示相应的SSB组是否用于传输SSB，inOneGroup的每个比特表示每组中相应的SSB的位置是否实际用于传输SSB（配置不灵活）。</p>
</li>
<li><p>第二种方式采用3种长度分别为4位、8位和64位比特的位图，各比特代表相应的SSB的位置是否实际用于传输SSB。</p>
</li>
</ul>
<p>两种ssb-PositionsInBurst表达方式的设计初衷，前者采用16bit就可表达实际传输SSB的位置，但网络实际传输SSB的灵活性受到了限制。后者保留网络实际传输SSB配置的灵活性，但最多却需要64bit。</p>
<h2 id="同步信号设计"><a href="#同步信号设计" class="headerlink" title="同步信号设计"></a>同步信号设计</h2><p>同步信号包括主同步信号和辅同步信号。</p>
<p>NR设计了3个主同步信号序列，主同步信号序列的ID为$N_{ID}^{(2)}\in{0,1,2}$。每个主同步信号序列对应于336个辅同步序列，辅同步信号序列的ID为$N_{ID}^{(1)}\in{0,1,…,335}$。每个NR物理小区标识$N_{ID}^{cell}$由主同步信号序列ID和辅同步信号序列ID的组合共同确定，即$N_{ID}^{cell}&#x3D;3N_{ID}^{(1)}+N_{ID}^{(2)}$。所以NR共支持336×3&#x3D;1008个物理小区标识。</p>
<p>1.主同步信号</p>
<img src="/2022/04/26/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-26-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%80-NR%E5%90%8C%E6%AD%A5%E5%9D%97%E4%B8%8EPBCH%E4%BC%A0%E8%BE%93/%E5%9B%BE5.png" class>

<p>2.辅同步信号</p>
<img src="/2022/04/26/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-26-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%80-NR%E5%90%8C%E6%AD%A5%E5%9D%97%E4%B8%8EPBCH%E4%BC%A0%E8%BE%93/%E5%9B%BE6.png" class>



<h1 id="PBCH传输"><a href="#PBCH传输" class="headerlink" title="PBCH传输"></a>PBCH传输</h1><p>PBCH是UE完成主同步信号和辅同步信号检测之后需要解码的第一个信道。PBCH和解调参考信号包含在SSB中。PBCH的内容为UE访问NR无线网络系统所需最小系统信息的一部分。</p>
<h2 id="PBCH内容"><a href="#PBCH内容" class="headerlink" title="PBCH内容"></a>PBCH内容</h2><p>NR将最小基本系统信息分为两部分：一部分在NR PBCH中，另一部分在SIB1（SIB:系统信息块）中。而PBCH设计的基本原则是尽可能减小PBCH的载荷。因此NR PBCH的载荷仅为56bit，其中24位来自高层广播信道（BCCH-BCH），剩余32bit由物理层提供，其中包括24bit循环冗余校验（CRC）比特。除了SSB时间索引和CRC比特外，同一个SSB突发集中所以SSB的PBCH内容是相同的。</p>
<h2 id="PBCH传输过程"><a href="#PBCH传输过程" class="headerlink" title="PBCH传输过程"></a>PBCH传输过程</h2><img src="/2022/04/26/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E6%A0%87%E5%87%86%E8%AF%A6%E8%A7%A3-2022-04-26-%E7%AC%AC5%E7%AB%A0-%E7%B3%BB%E7%BB%9F%E5%88%9D%E5%A7%8B%E6%8E%A5%E5%85%A5%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%80%A7%E7%AE%A1%E7%90%86%E8%AE%BE%E8%AE%A1-%E4%B8%80-NR%E5%90%8C%E6%AD%A5%E5%9D%97%E4%B8%8EPBCH%E4%BC%A0%E8%BE%93/%E5%9B%BE7.png" class title="PBCH传输过程">

<p>物理层产生PBCH符号和PBCH DM-RS的流程如图所示。首先，来自高层的24bit BCCH-BCH信息与来自物理层的8bit与SSB传输时间相关的信息组合，生成32bit PBCH有效载荷。然后，32bit PBCH有效载荷经历交织（改善前向纠错的性能）、第一次加扰（降低小区之间PBCH信号的相关性，从而降低小区之间的互相干扰）、附加CRC（提供PBCH传输块的错误检测）等过程，产生56bit PBCH载荷。然后，通过极化编码、速率匹配、第二次加扰（第一次加扰的效果有限，于是再一次加扰）、QPSK调制，生成共432个符号的PBCH序列。最后，432个符号的PBCH序列与144个符号的PBCH DM-RS序列一起被映射到用于传输的SSB。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/04/24/CP-OFDM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/me.jpg">
      <meta itemprop="name" content="水中岚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="水中岚">
      <meta itemprop="description" content="水中岚的博客">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 水中岚">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/04/24/CP-OFDM/" class="post-title-link" itemprop="url">CP-OFDM</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2022-04-24 14:18:24 / 修改时间：15:58:55" itemprop="dateCreated datePublished" datetime="2022-04-24T14:18:24+08:00">2022-04-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>OFDM：正交频分复用技术，是多载波调制的一种。OFDM的主要思想是：将信道分成若干个正交子信道，将高速数据信号转换成并行的低速子数据流，调制到每个子信道上进行传输。OFDM的调制和解调是基于IFFT和FFT实现的。</p>
<p>理想情况下，发送端所发送的符号到达接收端时不会受到任何影响。如图所示：</p>
<img src="/2022/04/24/CP-OFDM/%E5%9B%BE1.png" class title="理想情况">

<p>然而，现实情况中，由于多径、反射等情况，接收端可以接收到发送信号的多个延迟信号。如图所示</p>
<img src="/2022/04/24/CP-OFDM/%E5%9B%BE2.png" class title="现实情况">

<p>接收端接收到经过多个不同路径到达终点的信号，因此在图中所示的FFT window中t1采样点有来自Symbol1的干扰，这就是符号间干扰（ISI）。</p>
<p>我们称信号的第一个副本和该信号最后接收的一个副本之间的总延迟称为延迟扩展。如果符号周期与“延迟扩展”相比非常大，那么ISI带来的影响较小，反之，若符号周期与”延迟扩展“相比非常小，那么ISI带来的影响将非常大。</p>
<p>为了解决ISI，其中一个方法就是添加保护间隔，如图所示</p>
<img src="/2022/04/24/CP-OFDM/%E5%9B%BE3.png" class title="设置保护间隔">

<p>可以发现，在设置保护间隔后（保护间隔应该大于“延迟扩展”），在FFT Window中已经没有了其他信号的干扰了，然而由于保护间隔采用补零的措施，在接收端进行FFT时不同子载波之间已经不在正交，所以解调中的子载波会受到其他子载波的影响，这就是信道干扰（ICI），想要消除ICI，可以采用循环前缀（CP）或循环后缀（CS），这样既可以同时解决ISI和ICI。</p>
<img src="/2022/04/24/CP-OFDM/%E5%9B%BE4.png" class title="循环前缀">

<p>如图所示，将符号后部复制到符号前面作为保护间隔，这样FFT后不同子载波之间的内积为0，不同子载波相互正交，则不再有ISI和ICI。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">水中岚</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
